{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-25T21:49:12.594Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 5,
    "implemented": 4,
    "items": [
      {
        "id": "REQ-58",
        "summary": "Ensure the backend `main.mo` actor exposes full marketplace listing CRUD: `createListing` (accepts title, description, price as Text, condition as 'new'|'used', category as Text, imageUrl as Text), `getAllListings` (returns all listings), `getListing` (returns a single listing by ID), `deleteListing` (owner-only, removes the listing record). Each listing record must include: id (Nat), authorId (Principal), title, description, price, condition, category, imageUrl, createdAt (Int nanoseconds), and a sold flag (Bool). If this data model already exists in main.mo, verify it is complete and fix any missing fields or functions.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-59",
        "summary": "Create a Marketplace page at `frontend/src/pages/MarketplacePage.tsx`. The page must: (1) display a grid/list of all marketplace listings fetched from the backend via a `useGetAllListings` React Query hook, (2) each listing card shows the seller avatar, username, item title, price, condition badge (New/Used), category, and listing image, (3) include a prominent 'List Item for Sale' button (amber/orange CTA styled with the automotive theme) that opens a create-listing form or navigates to a create-listing page, (4) include a search/filter bar to filter listings by category (Parts, Wheels, Audio, Exterior, Interior, Other), (5) empty state message when no listings exist.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/MarketplacePage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/MarketplacePage.tsx"
        ]
      },
      {
        "id": "REQ-60",
        "summary": "Create a Create Listing page at `frontend/src/pages/CreateListingPage.tsx` with a form containing: title (text input), description (textarea), price (text input), condition selector (New / Used), category selector (Parts / Wheels / Audio / Exterior / Interior / Other), and a native file input for an image (accepts image/*, max 1.5 MB, encodes as base64 data URL, shows a preview). On submit, call the backend `createListing` mutation via a `useCreateListing` React Query mutation hook. On success, invalidate the listings cache and navigate back to `/marketplace`. On error, show a user-facing error message. The submit button must exit loading state in all outcomes.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/CreateListingPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/CreateListingPage.tsx"
        ]
      },
      {
        "id": "REQ-61",
        "summary": "Register the Marketplace route in `frontend/src/App.tsx` at `/marketplace` pointing to `MarketplacePage.tsx`, and the Create Listing route at `/marketplace/create` pointing to `CreateListingPage.tsx`. Add a 'Marketplace' entry to the `CreatePostSheet` (`frontend/src/components/CreatePostSheet.tsx`) as a fifth option alongside the existing four content types, navigating to `/marketplace/create` when tapped. Add a 'Marketplace' shortcut or tab entry on the Discover page (`frontend/src/pages/DiscoverPage.tsx`) so users can navigate to `/marketplace` from the discovery experience.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/App.tsx",
          "frontend/src/components/CreatePostSheet.tsx",
          "frontend/src/pages/DiscoverPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/App.tsx",
          "frontend/src/components/CreatePostSheet.tsx",
          "frontend/src/pages/DiscoverPage.tsx"
        ]
      },
      {
        "id": "REQ-62",
        "summary": "Add a `useGetAllListings` React Query query hook and a `useCreateListing` React Query mutation hook in `frontend/src/hooks/useQueries.ts`. `useGetAllListings` calls the backend `getAllListings` function and returns the listings array. `useCreateListing` calls the backend `createListing` function with the listing fields (including base64 imageUrl), on success invalidates the `getAllListings` cache key.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ]
      }
    ]
  },
  "changedFiles": [
    "build-request.json",
    "build-template/README.md",
    "caffeine.lock.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/App.tsx",
    "frontend/src/components/CreatePostSheet.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/CreateListingPage.tsx",
    "frontend/src/pages/DiscoverPage.tsx",
    "frontend/src/pages/MarketplacePage.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}